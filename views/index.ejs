<!DOCTYPE html>
<html lang="en">
<head>
<title>Rommie Finder</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/stylesheets/pageLayout.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" />
</head>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" />
<div class="popupWrapper">
<div class="popup" data-popup="popup-1" style ="z-index: 20">
    <div class="popup-inner">
      <div id = "loadHtml"></div>
      <br>
      <br>
        <a id="closepopUp" class="popup-close" data-popup1-close="popup-1" href="#">x</a>
    </div>
</div>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>
<script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/plain" src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>


<body>


<% include ../public/pageContent/navbar %>

        <div class="homePageContainer">

            <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                  <li data-target="#carousel-example-generic" data-slide-to="0" class=""></li>
                  <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                  <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                </ol>
                <div class="carousel-inner">
                  <div class="item active left">
                  <img style="height:100vh;width:100vw" src="/images/skyline4.jpg">
                  </div>
                  <div class="item next left">
                    <img style="height:100vh;width:100vw" src="/images/skyline5.jpg">
                  </div>
                   <div class="item">
                    <img  style="height:100vh;width:100vw" src="/images/skyline6.jpg">
                  </div>
                </div>
                <!-- <a class="left carousel-control" href="#carousel-example-generic" data-slide="prev">
                  <span class="glyphicon glyphicon-chevron-left"></span>
                </a>
                <a class="right carousel-control" href="#carousel-example-generic" data-slide="next">
                  <span class="glyphicon glyphicon-chevron-right"></span>
                </a> -->
            </div>

    <div id="mainContent" style="width:100vw">
        <div id="firstSection" class="v-m center-block text-center" style="position: absolute;top:40%;left:35vw;">
           <!--  <div class="my-row special">
            <div class="v-m">
 -->           <%if (!loggedIn) { %> 
            <div class="row">
                <h2 class ="text-center center-block" style="color: white">Find your best Mate here</h2>
            </div>
            <div class="row">
                <h3 class ="text-center center-block" style="color: white"> Your final stop to find your best roomate</h3>
            </div>    
            <br>
            <div class="row">    
            <div class="col-sm-4"></div>
            <div class="col-sm-4">
            <a id = "signup2" class=" text-center center-block btn btn-primary btn-lg" href="/signup" data-popup1-open="popup-1">Signup</a></div>
            </div>
            </div>
            <%}else{ %>
                <div id ="searchQuestion" class="center-block text-center">
                      <h2 class ="text-center center-block" style="color: Yellow">What do you want to do</h2>
                      <div class="row">
                      <button class="btn btn-primary btn-lg" id="rmate" onclick="handlebuttonClick(this)">I want a roommate/subletter</button>
                      </div>
                      <br>
                      <div class="row">
                      <button class="btn btn-primary btn-lg" id="aandrmate" onclick="handlebuttonClick(this)">I am looking for an apartment and a roommate</button>
                      </div> 
                      <br>   
                </div>
                </div>
                <div id="locationField" style="height:100vh;width:100%;display:none">
                  <div class="my-row special">
                    <div class="v-m">
                        <div id="findLoc" style="display:none;"> 
                            <h2 class="text-center locQues">Where do you want to live</h2>
                            <input class="form-control center-block input-lg" style="width:50%;"id="autocomplete" placeholder="Enter your address" onFocus="geolocate()" type="text">
                        </div>
                        <div id="neworViewPosts" class="center-block text-center" style="display:none">
                              <button href ="createPosts" onclick="handleCreatePostClick()" style="margin:10px;background-color: red;color: white" class="btn btn-lg">Create New posts</button>
                              <a href ="/viewUserPosts" style="margin:10px;background-color: red;color: white" class="btn btn-lg">View your Posts</a>  
                        </div>
                    </div>
                  </div>
                </div>

                <div id = "newPostsContainer" style="height:100vh;width:100%;display:none">
                    <div id="optionContainer" style="top:10%;position: relative">
                    <h2 class="text-center">What do you want to do</h2>
                    <div class="center-block text-center">
                    <button class="btn btn-primary" id="sublet" onclick="JavaScript:newPosts.handleButtonClick(this)">I have a room to sublet</button>
                    <button class="btn btn-primary" id="roommate" onclick="JavaScript:newPosts.handleButtonClick(this)">I am looking for a roommate</button>
                    </div>
                    </div>

                        <div id="uploadPosts" class="text-center center-block"> 
                                <h2 class="text-center locQues" id="loc"></h2>
                                <input class="form-control center-block input-lg" style="width:50%;" id="autocomplete2" placeholder="Enter your address" onFocus="geolocate()" type="text"/>
                               <br>
                                <div class="form-group">
                                    <label  class="btn btn-default btn-file" for="FileUpload_1">Select Picture </label>
                                    <input type="file" id ="FileUpload_1" accept="image/*" capture="camera" value="" onchange="JavaScript:newPosts.handleFileUploadChange(this)" style="display: none;">
                                    <input class ="form-control center-block" type="text" style= "width:30%;display:inline" name="fileName_1" id="fileName_1">
                                    <button class="btn btn-info" id="Upload_1" onclick ="JavaScript:newPosts.handleImageUpload(this)">Upload Image</button>
                                </div>
                                <br>
                                <button class="btn btn-info center-block" id="uploadMore" onclick="JavaScript:newPosts.createFileUpload()" style="display:none">Upload More pictures</button>
                                <br>
                                <textarea  class="form-control center-block" style="font-family:sans-serif;width:70%; height:100%; overflow: hidden;" placeholder ="Describe your Apartment..." id ="apartmentDesc" name="apartmentDesc" onkeyup="JavaScript:newPosts.auto_grow(this)"></textarea>
                                <br>
                                <button class="btn btn-info center-block" id="postButton" onclick="JavaScript:newPosts.handlePostClick()">Post</button>
                        </div>
                </div>
            <% } %> 
    </div> 
            
          
        </div>

</body>

<script src="//cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert-dev.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
<script src="js/handleposts.js"></script>
<script>

$(document).ready(function(){

     $('#signup').click(function (){
        $("#loadHtml").empty();
         $("#loadHtml").load($(this).attr("href"));
         return false;
     })

     $('#signup2').click(function (){
        $("#loadHtml").empty();
         $("#loadHtml").load($(this).attr("href"));
         return false;
     })

     $('#login_logout').click(function (){
        if(this.textContent=="Logout") location.href= $(this).attr("href");
        $("#loadHtml").empty();
         $("#loadHtml").load($(this).attr("href"));
         return false;
     })

      $('#forgetId').click(function (){
        $("#loadHtml").empty();
         $("#loadHtml").load($(this).attr("href"));
         return false;
     })


     var loggedIn = <%= loggedIn %> 
     if(loggedIn){
        document.getElementById("profile").style.display="block";
        document.getElementById("login_logout").textContent ="Logout";
        document.getElementById("login_logout").href ="/logout";
        document.getElementById("signup").style.display="none";
     }else{
        document.getElementById("profile").style.display="none";
        document.getElementById("login_logout").textContent ="Login";
        document.getElementById("login_logout").href ="/login";
        document.getElementById("signup").style.display="block";
     }
     

});

function geolocate() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var geolocation = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
            var circle = new google.maps.Circle({
              center: geolocation,
              radius: position.coords.accuracy
            });
            autocomplete.setBounds(circle.getBounds());
            autocomplete2.setBounds(circle.getBounds());
          });
        }
}

function handlebuttonClick(el){
    document.getElementById("locationField").style.display="block";
    if(el.id=="aandrmate"){ 
        document.getElementById("findLoc").style.display="block";
        document.getElementById("neworViewPosts").style.display="none";
    }else{
        document.getElementById("neworViewPosts").style.display="block";
        document.getElementById("findLoc").style.display="none";
    }
     $('html,body').animate({
        scrollTop: $("#locationField").offset().top},
        'slow');
     initialize();
}

function handleCreatePostClick(){
    document.getElementById("newPostsContainer").style.display ="block";
    console.log("top here:",$("#newPostsContainer").offset().top);
    $('html,body').animate({
        scrollTop: $("#newPostsContainer").offset().top},
        'slow');

}

var autocomplete,autocomplete2;
function initialize() {
        autocomplete = new google.maps.places.Autocomplete(
        (document.getElementById('autocomplete')),
                  { types: ['geocode'] });
              google.maps.event.addListener(autocomplete, 'place_changed', function() {
              });

        autocomplete2 = new google.maps.places.Autocomplete(
        (document.getElementById('autocomplete2')),
                  { types: ['geocode'] });
              google.maps.event.addListener(autocomplete2, 'place_changed', function() {
              });      

              
}

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA_T0L3QXJI0RusVVZ-44z7IWk1i4XKUOk&libraries=places"
        async defer></script>
</html>