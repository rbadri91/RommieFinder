<!doctype html>
<html lang="en" class="no-js">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<link rel="stylesheet" type="text/css" href="/stylesheets/pageLayout.css">

<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" /> 
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body onload="initialize()">
<div id = "PostInfoContainer" style="margin-top:7%;width:60%;display: inline-block;float: left">

<div id ="postWrapper">
	<div id="imageContainer" class="text-center center-block" style="width:95%;">
	<% if(postDescription.postInfo.imageUrl.length>0) { %>
		<div id="carousel-example-generic" data-interval=false class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                <% for(var i=0;i<postDescription.postInfo.imageUrl.length;i++ ) {%>
                  <li data-target="#carousel-example-generic" data-slide-to="<%=i%>"></li>
                <% } %>  
                </ol>
                <div class="carousel-inner">
                  <div class="item active left">
                  <img style="height:40%;width:100%" src="<%=postDescription.postInfo.imageUrl[0] %>">
                  </div>
                  <% if(postDescription.postInfo.imageUrl[1]){ %>
                  <div class="item next left">
                    <img style="height:40%;width:100%" src="<%=postDescription.postInfo.imageUrl[1] %>">
                  </div>
                  <% } %>
                  <% for(var j=2;j<postDescription.postInfo.imageUrl.length;j++ ) { %>
                   <div class="item">
                    <img  style="height:40%;width:100%" src="<%=postDescription.postInfo.imageUrl[j] %>">
                  </div>
                  <% } %>
                </div>
                <a class="left carousel-control" href="#carousel-example-generic" data-slide="prev">
                  <span class="glyphicon glyphicon-chevron-left"></span>
                </a>
                <a class="right carousel-control" href="#carousel-example-generic" data-slide="next">
                  <span class="glyphicon glyphicon-chevron-right"></span>
                </a>
        </div>
    <% } %>
	</div>
	<br>
	<div class = "postDescription displayInfo">
		<h3 class="text-center">Description of the Apartment</h3>
		<div><i class="fa fa-map-marker" aria-hidden="true"></i> <%=postDescription.postInfo.postLocation %></div>
		<div><i class="fa fa-calendar" aria-hidden="true"></i> <%=postDescription.postInfo.timestamp %></div>
		<div><i class="fa fa-money" aria-hidden="true"></i> <%=postDescription.postInfo.price %></div>
		<% if(postDescription.postInfo.roomType == "1") {%>
		<div><i class="fa fa-bed" aria-hidden="true"></i> 1 bedroom 1 bed</div>
		<%}%>
		<% if(postDescription.postInfo.roomType == "2") {%>
		<div><i class="fa fa-bed" aria-hidden="true"></i>1 bedroom 2 beds</div>
		<%}%>
		<% if(postDescription.postInfo.roomType == "3") {%>
		<div><i class="fa fa-bed" aria-hidden="true"></i> 2 bedroom 2 beds</div>
		<%}%>
		<% if(postDescription.postInfo.roomType == "4") {%>
	<div><i class="fa fa-bed" aria-hidden="true"></i> 2 bedroom 4 beds</div>
		<%}%>
		<div><i class="fa fa-file-text" aria-hidden="true"></i> Room Description</div>
		<div><%=postDescription.postInfo.postDesc %></div>
	</div>

</div>
<br>
<div id = "profileWrapper" class="displayInfo" style="position:relative;">
	<h3 class="text-center">Listed By</h3>
	<div style="width:10%;height: 5%;margin:2%;overflow:hidden;display:inline-block;border-radius: 100%;float: left">
	<img src ='<%=postDescription.userInfo.data.profileURL%>' height = "100%" width="100%" alt = "" />
	</div>
	<div class = "content" style="display:inline-block;margin:2%">
	<div>Name:<%=postDescription.userInfo.data.firstName%> <%=postDescription.userInfo.data.lastName%></div>
	<div>Gender: <%=postDescription.userInfo.data.gender %></div>
	<div>Email: <%=postDescription.userInfo.data.email %></div>
	<div>Contact: <%=postDescription.userInfo.data.contact %></div>
	</div>
</div>
</div>
<div id="locationIndicator" style="height:55%;width:40%;margin-top:7%;display: inline-block;">
</div>

</body>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA_T0L3QXJI0RusVVZ-44z7IWk1i4XKUOk&libraries=places"
        async defer></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>
<script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/plain" src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js></script>
<script>
var geocoder;
var map;
var address = "Flushing, Queens, NY, United States";

function initialize() {
  geocoder = new google.maps.Geocoder();
  var latlng = new google.maps.LatLng(-34.397, 150.644);
  var myOptions = {
    zoom: 15,
    center: latlng
  };
  map = new google.maps.Map(document.getElementById("locationIndicator"), myOptions);
  console.log("map here:",map);
  if (geocoder) {
  	console.log("it comes inside address:",address);
    geocoder.geocode({
      'address': address
    }, function(results, status) {
      if (status == 'OK') {
      	console.log("status obtained");
        if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
        	console.log("location here:",results[0].geometry.location);
        	console.log("inside if check");
          map.setCenter(results[0].geometry.location);

          var marker = new google.maps.Marker({
            position: results[0].geometry.location,
            map: map,
            title: address
          });

        } else {
          alert("No results found");
        }
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }
}
google.maps.event.addDomListener(window, 'load', initialize);
</script>
</html>